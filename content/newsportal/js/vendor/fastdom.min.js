/*! Ringid.com 2016-03-08 */
!function(a){"use strict";function b(){this.frames=[],this.lastId=0,this.raf=c,this.batch={hash:{},read:[],write:[],mode:null}}var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)};b.prototype.read=function(a,b){var c=this.add("read",a,b),d=c.id;this.batch.read.push(c.id);var e="reading"===this.batch.mode||this.batch.scheduled;return e?d:(this.scheduleBatch(),d)},b.prototype.write=function(a,b){var c=this.add("write",a,b),d=this.batch.mode,e=c.id;this.batch.write.push(c.id);var f="writing"===d||"reading"===d||this.batch.scheduled;return f?e:(this.scheduleBatch(),e)},b.prototype.defer=function(a,b,c){"function"==typeof a&&(c=b,b=a,a=1);var d=this,e=a-1;return this.schedule(e,function(){d.run({fn:b,ctx:c})})},b.prototype.clear=function(a){if("function"==typeof a)return this.clearFrame(a);a=Number(a);var b=this.batch.hash[a];if(b){var c=this.batch[b.type],d=c.indexOf(a);delete this.batch.hash[a],~d&&c.splice(d,1)}},b.prototype.clearFrame=function(a){var b=this.frames.indexOf(a);~b&&this.frames.splice(b,1)},b.prototype.scheduleBatch=function(){var a=this;this.schedule(0,function(){a.batch.scheduled=!1,a.runBatch()}),this.batch.scheduled=!0},b.prototype.uniqueId=function(){return++this.lastId},b.prototype.flush=function(a){for(var b;b=a.shift();)this.run(this.batch.hash[b])},b.prototype.runBatch=function(){try{this.batch.mode="reading",this.flush(this.batch.read),this.batch.mode="writing",this.flush(this.batch.write),this.batch.mode=null}catch(a){throw this.runBatch(),a}},b.prototype.add=function(a,b,c){var d=this.uniqueId();return this.batch.hash[d]={id:d,fn:b,ctx:c,type:a}},b.prototype.run=function(a){var b=a.ctx||this,c=a.fn;if(delete this.batch.hash[a.id],!this.onError)return c.call(b);try{c.call(b)}catch(d){this.onError(d)}},b.prototype.loop=function(){var a=this,b=this.raf;this.looping||(b(function c(){var d=a.frames.shift();a.frames.length?b(c):a.looping=!1,d&&d()}),this.looping=!0)},b.prototype.schedule=function(a,b){return this.frames[a]?this.schedule(a+1,b):(this.loop(),this.frames[a]=b)},a=a||new b,"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):window.fastdom=a}(window.fastdom);